{{ 'component-cart-drawer.css' | asset_url | stylesheet_tag }}
<script src="{{ 'cart-drawer.js' | asset_url }}" defer="defer"></script>

<cart-drawer class="cart-drawer" data-cart-drawer>
  <div class="cart-drawer__overlay" data-cart-drawer-overlay></div>
  
  <div class="cart-drawer__container" role="dialog" aria-modal="true" aria-label="{{ 'sections.cart.title' | t }}">
    <div class="cart-drawer__header">
      <h2 class="cart-drawer__title">{{ 'sections.cart.title' | t }}</h2>
      <button type="button" class="cart-drawer__close" aria-label="{{ 'general.accessibility.close' | t }}" data-cart-drawer-close>
        {% render 'icon-close' %}
      </button>
    </div>

    <div class="cart-drawer__body" data-cart-drawer-body>
      <div class="cart-drawer__items" data-cart-items>
        {% if cart.item_count > 0 %}
          {% for item in cart.items %}
            <div class="cart-drawer__item" data-index="{{ forloop.index }}">
              <div class="cart-drawer__item-image">
                {% if item.image %}
                  <img src="{{ item.image | image_url: width: 100 }}" alt="{{ item.image.alt | escape }}" loading="lazy" width="100" height="100">
                {% endif %}
              </div>

              <div class="cart-drawer__item-details">
                <a href="{{ item.url }}" class="cart-drawer__item-title">{{ item.product.title }}</a>
                {% unless item.variant.title contains 'Default' %}
                  <p class="cart-drawer__item-variant">{{ item.variant.title }}</p>
                {% endunless %}

                <div class="cart-drawer__item-quantity">
                  <button type="button" class="quantity-button" data-quantity-decrease="{{ item.index }}">-</button>
                  <input
                    type="number"
                    value="{{ item.quantity }}"
                    min="0"
                    data-quantity-input="{{ item.index }}"
                    aria-label="{{ 'products.product.quantity.input_label' | t }}"
                  >
                  <button type="button" class="quantity-button" data-quantity-increase="{{ item.index }}">+</button>
                </div>

                <div class="cart-drawer__item-price">
                  {{ item.final_line_price | money }}
                </div>
              </div>

              <button type="button" class="cart-drawer__item-remove" data-cart-item-remove="{{ item.index }}" aria-label="{{ 'sections.cart.remove_title' | t: title: item.title }}">
                {% render 'icon-close' %}
              </button>
            </div>
          {% endfor %}
        {% else %}
          <div class="cart-drawer__empty">
            <p>{{ 'sections.cart.empty' | t }}</p>
          </div>
        {% endif %}
      </div>
    </div>

    {% if cart.item_count > 0 %}
      <div class="cart-drawer__footer">
        <div class="cart-drawer__subtotal">
          <span>{{ 'sections.cart.subtotal' | t }}</span>
          <span data-cart-total>{{ cart.total_price | money }}</span>
        </div>

        <p class="cart-drawer__shipping-note">{{ 'sections.cart.shipping_at_checkout' | t }}</p>

        <a href="{{ routes.cart_url }}" class="button button--secondary cart-drawer__view-cart">
          {{ 'sections.cart.view_cart' | t }}
        </a>

        <button type="button" class="button button--primary cart-drawer__checkout" onclick="window.location='{{ routes.cart_url }}'">
          {{ 'sections.cart.checkout' | t }}
        </button>
      </div>
    {% endif %}
  </div>
</cart-drawer>
